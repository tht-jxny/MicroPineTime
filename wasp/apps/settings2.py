# 1-bit RLE, generated from res/switch3_middle.png, 303 bytes
switch3_middle = (
    160, 40,
    b'\x10\t3\t3\t\x1c\x0f-\x0f-\x0f\x17\x13)\x13'
    b')\x13\x13\x16&\x16&\x16\x11\x18$\x18$\x19\r\x1c'
    b'#\x16$\x1b\x0b\x1e#\x14$\x1d\n\x1e$\x12$\x1f'
    b'\x08 \x1c\x01\x07\x10\x07\x01\x1c \x07"\x1a\x03\x07\x0e'
    b'\x07\x03\x1a"\x06#\x19\x03\x08\x0c\x07\x05\x19#\x04$'
    b'\x18\x05\x08\n\x07\x06\x18$\x04%\x17\x06\x08\x08\x07\x08'
    b'\x17%\x02&\x16\x08\x08\x06\x07\t\x16&\x02&\x16\t'
    b"\x08\x04\x07\n\x16&\x02'\x15\n\x08\x02\x07\x0c\x15O"
    b'\x14\x0c\x0f\r\x14P\x14\r\r\x0e\x14P\x14\x0e\x0b\x0f'
    b'\x14P\x14\x0f\t\x10\x14P\x14\x10\x08\x10\x14P\x14\x0f'
    b'\n\x0f\x14P\x14\x0e\x0c\x0e\x14P\x14\r\x0e\r\x14P'
    b"\x15\x0b\x07\x01\x08\x0c\x15'\x01&\x16\n\x07\x03\x08\n"
    b"\x16'\x01&\x16\t\x07\x05\x08\t\x16&\x02&\x17\x07"
    b'\x07\x07\x08\x08\x17%\x03$\x18\x06\x07\t\x07\x07\x18$'
    b'\x04$\x18\x05\x07\x0b\x07\x06\x19#\x05"\x1a\x03\x07\r'
    b'\x07\x04\x1a"\x07 \x1c\x01\x07\x0f\x07\x02\x1c!\x07 '
    b'#\x11%\x1f\t\x1e#\x13$\x1e\x0b\x1c#\x15$\x1c'
    b'\r\x1a#\x17%\x19\x10\x16&\x16&\x16\x13\x14(\x14'
    b'(\x14\x16\x10,\x10,\x10\x1a\x0b1\x0b1\x0b\x0f'
)
# 1-bit RLE, generated from res/switch3_left.png, 301 bytes
switch3_left = (
    160, 40,
    b'\x10\t3\t3\t\x1c\x0f-\x0f-\x0f\x17\x13)\x13'
    b')\x13\x13\x16&\x16&\x16\x11\x18$\x18$\x19\x0f\x18'
    b'#\x1b!\x1b\x0f\x16#\x1d\x1f\x1d\x0f\x14#\x1e\x1e\x1f'
    b'\x0f\x12# \x1c \x07\x02\x07\x10\x07\x02\x1a"\x1a"'
    b'\x06\x03\x07\x0e\x07\x04\x19#\x19#\x04\x05\x07\x0c\x07\x05'
    b'\x18$\x18$\x04\x06\x07\t\x08\x07\x17%\x17%\x02\x08'
    b'\x07\x07\x08\x08\x16&\x16&\x02\t\x07\x05\x08\t\x16&'
    b"\x16&\x02\n\x07\x03\x08\x0b\x15'\x153\x07\x01\x08\x0c"
    b'\x14(\x145\x0e\r\x14(\x146\x0c\x0e\x14(\x147'
    b'\n\x0f\x14(\x148\x08\x10\x14(\x147\t\x10\x14('
    b'\x146\x0b\x0f\x14(\x145\r\x0e\x14(\x144\x0f\r'
    b"\x15'\x15'\x01\n\x07\x03\x07\x0b\x16&\x16'\x01\t"
    b'\x07\x05\x07\n\x16&\x16&\x02\x08\x07\x07\x07\t\x17%'
    b'\x17%\x03\x06\x07\t\x07\x07\x18$\x18$\x04\x05\x07\x0b'
    b'\x07\x06\x18$\x19#\x05\x03\x07\r\x07\x04\x1a"\x1a"'
    b'\x07\x01\x07\x0f\x07\x02\x1c \x1c!\x0e\x11\x07\x01\x1d\x1f'
    b'\x1d\x1f\x0e\x13$\x1e\x1e\x1e\x0e\x15$\x1c \x1c\x0e\x17'
    b'$\x1a#\x19\x10\x16&\x16&\x16\x13\x14(\x14(\x14'
    b'\x16\x10,\x10,\x10\x1a\x0b1\x0b1\x0b\x0f'
)
# 1-bit RLE, generated from res/switch3_right.png, 305 bytes
switch3_right = (
    160, 40,
    b'\x10\x084\x084\x08\x1d\x0e.\x0e.\x0e\x18\x12*\x12'
    b'*\x12\x14\x16&\x16&\x16\x11\x19#\x19#\x18\x0e\x1c'
    b'!\x1b#\x16\x0e\x1e\x1f\x1d#\x14\x0f\x1f\x1d\x1e$\x12'
    b'\x0f \x1c \x1c\x01\x07\x10\x07\x01\x07"\x1a"\x1a\x03'
    b'\x07\x0e\x07\x03\x06"\x1a#\x19\x04\x07\x0c\x07\x04\x05$'
    b'\x18$\x18\x06\x07\n\x07\x06\x04$\x17&\x17\x07\x07\x08'
    b'\x07\x08\x02&\x16&\x16\t\x07\x06\x07\t\x02&\x16&'
    b'\x16\n\x07\x04\x07\n\x02&\x15(\x15\x0b\x07\x02\x074'
    b'\x14(\x14\r\x0e5\x14(\x14\x0e\x0c6\x14(\x14\x0f'
    b'\n7\x14(\x14\x10\x088\x14(\x14\x10\x088\x14('
    b'\x14\x0f\n7\x14(\x14\x0e\x0c6\x14(\x14\r\x0e\r'
    b"\x01'\x14(\x15\x0b\x07\x02\x07\x0c\x01&\x16'\x15\n"
    b'\x07\x04\x07\n\x02&\x16&\x16\t\x07\x06\x07\t\x03%'
    b'\x16&\x17\x07\x07\x08\x07\x08\x03$\x18$\x18\x06\x07\n'
    b'\x07\x06\x05#\x18$\x19\x04\x07\x0c\x07\x05\x05"\x1a"'
    b'\x1a\x03\x07\x0e\x07\x03\x07 \x1c \x1c\x01\x07\x10\x07\x02'
    b'\x07 \x1d\x1f#\x12\x10\x1e\x1e\x1e#\x14\x10\x1c \x1c'
    b'#\x16\x10\x1a"\x1a#\x18\x11\x16&\x16&\x16\x13\x14'
    b'(\x14(\x14\x16\x10,\x10,\x10\x1b\n2\n2\n'
    b'\x0f'
)

# 2-bit RLE, generated from res/settings_new.png, 638 bytes
settings_new = (
    b'\x02'
    b'`@'
    b'?\xff\xff\xef@IA\xc1\xc4\x80\xdb\x81\x01?\x18\x01'
    b'\xc7\xc1?\x18\xc0m\xc1@\xffH\x80I\x81?\x17\xc0'
    b'\xdb\xc1H@\xb6A?\r\x01\x08\x80$\x81\xc0\xff\xca'
    b'\x01\x08\x01?\x02@mA\x80\xdb\x81\xc0\x92\xc1\x01\x06'
    b'\x81@\xffJ\x80\xb6\x81\x06\xc0I\xc1@\xdbA\x80\xff'
    b'\x81\xc0m\xc1?\x00@\x92A\x84\x80\xb6\x81\xc0I\xc1'
    b'\x01\x02@$A\x80\xff\x81\x8a\x81A\x02\x01\xc0m\xc1'
    b'\x81\x84@\x92A=A\x87\x81\x80\xb6\x81\xc0\xdb\xc1@'
    b'\xffALA\xc1\x81AG\x80\x92\x81;\x81d\x819'
    b'\xc0I\xc1f@$A8A\x80\xff\xa5\x81\x018\x01'
    b'\x81\xa4\xc0\xdb\xc1\x019@\x92A\xa4\x80m\x81:\xc0'
    b'$\xc1@\xffd\x01;\x80\xb6\x81b\xc0m\xc1<\x01'
    b'AMA@\xdbA\x82A\x80\xff\x81\x8d\x81\x01<\x01'
    b'\x81\x8b\x81\xc1\x06\xc1\x81\x8b\x81\x01<\xc1\x8b\xc0\x92\xc1'
    b'\x01\x08\x01@\xb6A\x8b\x80m\x819\x01\xc0$\xc1A'
    b'@\xffK\x80\xb6\x81\x0c\x81K\xc0\xdb\xc1@$A\x01'
    b'4\x01\x80\x92\x81\xc0\xff\xc1\xcc@\xdbA\x0eA\xcc\xc1'
    b'\x80\xb6\x81\xc0$\xc10\x01@mA\x80\xff\x8e\x81\xc1'
    b'\x0e\xc1\x81\x8e\xc0\xb6\xc1\x01.@IA\x8f\x81\x01\x0e'
    b'\x01\x81\x8fA.A\x8f\xc1\x10\xc1\x8fA.A\x8f\x80'
    b'\x92\x81\x10\x81\xc0\xff\xcfA.A\xcf\x81\x10\x81\xcfA'
    b'.A\xcf@\xb6A\x10A\xcf\x80I\x81.\x81\xcf\xc1'
    b'\x01\x0e\x01\xc1\xcf\x81.\x01A\xce\xc1\xc0$\xc1\x0e\xc1'
    b'@\xffAMA\x80\x92\x81\x01/\x01\x01\xc0\xb6\xc1M'
    b'A\x0eALA@mA\x014\x01\x80I\x81\xc1\xc0'
    b'\xff\xcb@\xb6A\x0cA\xcbA\x81:\x80m\x81\xcbA'
    b'\x01\x08\x01A\xcb\x81<\x01\xc1\xcb\xc1\xc0\x92\xc1\x01\x04'
    b'\x01\xc1@\xffAKA\x01<\x01AN\x80\xdb\x81\xc0'
    b'\xb6\xc2\x81NA\x01<@\x92A\x80\xff\xa2\xc1;\x01'
    b'\xa4\x01:\xc0m\xc1\xa4A9\x01@\xdbA\xa4\x81\x01'
    b'8\x01\xa6\x80$\x818\x81\xc0\xff\xe6@IA9\x80'
    b'\x92\x81\xe4\x81;\xc0m\xc1@\xffH\x81\x80\xdb\x81N'
    b'\xc0\xb6\xc1@\x92A\x80\xff\x88\xc0m\xc1=A\x84@'
    b'\xdbA\xc1\x01\x02\x80$\x81\xc0\xff\xc1\xca\xc1\x81\x02\x01'
    b'@mA\x80\xb6\x81\xc4\xc0\x92\xc1?\x00A@\xffA'
    b'\x80\xdb\x81\xc0$\xc1\x06@\xb6A\x80\xff\x8a\xc0\xdb\xc1'
    b'\x06\x01@mA\xc1A?\x02\x01\x08\x01\x8a\x80$\x81'
    b'?\x16\xc0\xb6\xc1@\xffH\x80\xdb\x81?\x17\xc0I\xc1'
    b'H@mA?\x18\x80\xff\x81\x86\x81\x01?\x18\x01\xc0'
    b'\xdb\xc1\xc4\xc1@IA?\xff\xff\xef'
)



# SPDX-License-Identifier: LGPL-3.0-or-later
# Copyright (C) 2020 Johannes Wache
"""Ultra-simple settings application.

Currently the settings application contains only one setting: brightness
"""

import wasp
import fonts.gotham36

class Settings2App():
    NAME = 'Settings'
    ICON = settings_new

    def foreground(self):
        self._draw()
        wasp.system.request_event(wasp.EventMask.TOUCH)

    def touch(self, event):
        if (event[2] >= 45) and (event[2] <=85): # Brightness
            if (event[1] >= 40) and (event[1] <= 80):
                wasp.system.brightness = 1
            elif (event[1] >= 100) and (event[1] <= 140):
                wasp.system.brightness = 2
            elif (event[1] >= 160) and (event[1] <= 200):
                wasp.system.brightness = 3
            else:
                print("Error with brightness touch")
        if (event[2] >= 165) and (event[2] <=205): # Sleep timer
            if (event[1] >= 40) and (event[1] <= 80):
                wasp.system.blank_after = 7
            elif (event[1] >= 100) and (event[1] <= 140):
                wasp.system.blank_after = 15
            elif (event[1] >= 160) and (event[1] <= 200):
                wasp.system.blank_after = 30
            else:
                print("Error with sleep timer touch")
        self._update()

    def _draw(self):
        """Redraw the display from scratch."""
        wasp.watch.drawable.fill()
        wasp.watch.drawable.string('Low  Mid  High', 0, 90, width=240)
        wasp.watch.drawable.string(' 7s   15s  30s', 0, 210, width=240)
        wasp.watch.drawable.set_font(fonts.gotham36)
        wasp.watch.drawable.string('Brightness:', 0, 4, width=240)
        wasp.watch.drawable.string('Sleeptimer:', 0, 120, width=240)
        wasp.watch.drawable.reset()
        self._update()

    def _update(self):
        if wasp.system.brightness == 3:
            brightness_icon = switch3_right
        elif wasp.system.brightness == 2:
            brightness_icon = switch3_middle
        else:
            brightness_icon = switch3_left
        wasp.watch.drawable.blit(brightness_icon,x=40,y=45)
        if wasp.system.blank_after == 7 :
            timer_icon = switch3_left
        elif wasp.system.blank_after == 15 :
            timer_icon = switch3_middle
        else:
            timer_icon = switch3_right
        wasp.watch.drawable.blit(timer_icon,x=40,y=165)
